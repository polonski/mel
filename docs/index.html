<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MEL – Human Query → LLM Elixir</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            mono: ['JetBrains Mono', 'Menlo', 'Consolas', 'monospace'],
          },
          colors: {
            primary: '#3b82f6',
            'primary-dark': '#2563eb',
          }
        }
      }
    }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    /* Custom Slider Styling to maintain the fill effect */
    input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      background: transparent;
      cursor: pointer;
    }
    
    input[type="range"]::-webkit-slider-runnable-track {
      background: linear-gradient(to right, #3b82f6 0%, #3b82f6 var(--value, 50%), #e2e8f0 var(--value, 50%), #e2e8f0 100%);
      border-radius: 9999px;
      height: 0.5rem;
    }
    
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      margin-top: -6px;
      background-color: #3b82f6;
      height: 1.25rem;
      width: 1.25rem;
      border-radius: 50%;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      transition: transform 0.15s ease;
    }

    input[type="range"]::-moz-range-track {
      background: linear-gradient(to right, #3b82f6 0%, #3b82f6 var(--value, 50%), #e2e8f0 var(--value, 50%), #e2e8f0 100%);
      border-radius: 9999px;
      height: 0.5rem;
    }

    input[type="range"]::-moz-range-thumb {
      border: none;
      background-color: #3b82f6;
      height: 1.25rem;
      width: 1.25rem;
      border-radius: 50%;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      transition: transform 0.15s ease;
    }

    input[type="range"]:focus {
      outline: none;
    }

    input[type="range"]::-webkit-slider-thumb:hover {
      transform: scale(1.1);
    }
    
    input[type="range"]::-moz-range-thumb:hover {
      transform: scale(1.1);
    }
  </style>
</head>

<body class="bg-slate-50 text-slate-800 min-h-screen py-8 px-4 md:py-12 font-sans">

  <div class="max-w-5xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden border border-slate-100">
    
    <!-- Header -->
    <div class="bg-white p-8 pb-0 text-center">
      <h1 class="text-4xl md:text-5xl font-bold text-blue-600 mb-3 tracking-tight">MEL</h1>
      <p class="text-slate-500 text-lg max-w-2xl mx-auto">Machine Expression Language: A guided journey to craft powerful, directive-based LLM prompts.</p>
    </div>

    <!-- Tabs -->
    <div class="flex justify-center gap-8 mt-8 border-b border-slate-200 px-8">
      <button id="tab-btn-general" onclick="switchTab('general')" 
        class="tab-btn pb-4 px-2 text-lg font-semibold border-b-2 transition-colors duration-200 text-blue-600 border-blue-600">
        General Prompting
      </button>
      <button id="tab-btn-software" onclick="switchTab('software')" 
        class="tab-btn pb-4 px-2 text-lg font-semibold border-b-2 border-transparent text-slate-500 hover:text-slate-800 transition-colors duration-200">
        Software Development
      </button>
    </div>

    <!-- Content Container -->
    <div class="p-6 md:p-10">

    <!-- General Prompting Tab -->
    <div id="general" class="tab-content block space-y-10">

      <div class="grid gap-8">

        <div class="space-y-6">
          <div class="flex flex-col gap-2">
            <label for="humanQuery" class="font-semibold text-slate-700 text-lg">Your human query:</label>
            <textarea id="humanQuery" class="w-full min-h-[120px] p-4 border border-slate-200 rounded-xl font-mono text-sm bg-slate-50 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all resize-y placeholder-slate-400"
              placeholder="Example: Build a beautiful todo app in React with dark mode and drag & drop"></textarea>
          </div>

          <div class="flex flex-col gap-2">
            <label for="examples" class="font-semibold text-slate-700">Provide Examples (Optional):</label>
            <textarea id="examples" class="w-full min-h-[100px] p-4 border border-slate-200 rounded-xl font-mono text-sm bg-slate-50 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all resize-y placeholder-slate-400"
              placeholder="Provide one or more input/output examples to guide the model. e.g.,&#10;Input: 'hello world'&#10;Output: 'dlrow olleh'"></textarea>
          </div>

          <div class="flex flex-col gap-2">
            <label for="exclusions" class="font-semibold text-slate-700">Exclusions (Optional):</label>
            <textarea id="exclusions" rows="2" class="w-full min-h-[80px] p-4 border border-slate-200 rounded-xl font-mono text-sm bg-slate-50 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all resize-y placeholder-slate-400"
              placeholder="Specify what to avoid. e.g.,&#10;- Do not use technical jargon.&#10;- Avoid mentioning specific competitors."></textarea>
          </div>
        </div>

        <div class="space-y-3" id="step1">
          <div class="flex justify-between items-end border-b border-slate-100 pb-2 mb-2">
            <h2 class="text-xl font-bold text-blue-600">Step 1: Define the Persona</h2>
          </div>
          <label for="roleLevel" class="block text-sm text-slate-600 mb-2">Adjust the expertise and character of the assistant.</label>
          <div class="relative h-10 flex items-center">
            <input type="range" id="roleLevel" min="1" max="10" value="4" oninput="updateSlider(this)" class="w-full">
          </div>
          <div class="flex justify-between text-xs text-slate-400 px-1">
            <span>Student</span>
            <span>Assistant</span>
            <span>Collaborator</span>
            <span>Expert</span>
            <span>Specialist</span>
            <span>Mentor</span>
            <span>Visionary</span>
            <span>Devil's Advocate</span>
            <span>Oracle</span>
            <span>Simulator</span>
          </div>
        </div>

        <div class="space-y-3" id="step2">
          <div class="flex justify-between items-end border-b border-slate-100 pb-2 mb-2">
            <h2 class="text-xl font-bold text-blue-600">Step 2: Define the Task</h2>
          </div>
          <label for="taskLevel" class="block text-sm text-slate-600 mb-2">Specify the primary action for the assistant to perform.</label>
          <div class="relative h-10 flex items-center">
            <input type="range" id="taskLevel" min="1" max="10" value="2" oninput="updateSlider(this)" class="w-full">
          </div>
          <div class="flex justify-between text-xs text-slate-400 px-1">
            <span>Execute</span>
            <span>Achieve</span>
            <span>Synthesize</span>
            <span>Precise-Exec</span>
            <span>Brainstorm</span>
            <span>Explain</span>
            <span>Critique</span>
            <span>Design</span>
            <span>Deconstruct</span>
            <span>Tutor</span>
          </div>
        </div>

        <div class="space-y-3" id="step3">
          <div class="flex justify-between items-end border-b border-slate-100 pb-2 mb-2">
            <h2 class="text-xl font-bold text-blue-600">Step 3: Define the Audience</h2>
          </div>
          <label for="audienceLevel" class="block text-sm text-slate-600 mb-2">Calibrate the tone and complexity for a specific audience.</label>
          <div class="relative h-10 flex items-center">
            <input type="range" id="audienceLevel" min="1" max="10" value="1" oninput="updateSlider(this)" class="w-full">
          </div>
          <div class="flex justify-between text-xs text-slate-400 px-1">
            <span>None</span>
            <span>A Child</span>
            <span>A Novice</span>
            <span>A Peer</span>
            <span>A Manager</span>
            <span>A Skeptic</span>
            <span>An Expert</span>
            <span>A Regulator</span>
            <span>Posterity</span>
            <span>The Self</span>
          </div>
        </div>

        <div class="space-y-3" id="step4">
          <div class="flex justify-between items-end border-b border-slate-100 pb-2 mb-2">
            <h2 class="text-xl font-bold text-blue-600">Step 4: State the Purpose</h2>
          </div>
          <label for="purposeLevel" class="block text-sm text-slate-600 mb-2">Explain the "why" behind your request for a more meaningful outcome.</label>
          <div class="relative h-10 flex items-center">
            <input type="range" id="purposeLevel" min="1" max="10" value="3" oninput="updateSlider(this)" class="w-full">
          </div>
          <div class="flex justify-between text-xs text-slate-400 px-1">
            <span>None</span>
            <span>Practical</span>
            <span>Educational</span>
            <span>Durable</span>
            <span>Strategic</span>
            <span>Commercial</span>
            <span>Impactful</span>
            <span>Artistic</span>
            <span>Provocative</span>
            <span>Transformative</span>
          </div>
        </div>

        <div class="space-y-3" id="step5">
          <div class="flex justify-between items-end border-b border-slate-100 pb-2 mb-2">
            <h2 class="text-xl font-bold text-blue-600">Step 5: Set the Innovation Level</h2>
          </div>
          <label for="innovationLevel" class="block text-sm text-slate-600 mb-2">Choose how much creativity and novelty to introduce.</label>
          <div class="relative h-10 flex items-center">
            <input type="range" id="innovationLevel" min="1" max="10" value="4" oninput="updateSlider(this)" class="w-full">
          </div>
          <div class="flex justify-between text-xs text-slate-400 px-1">
            <span>Standard</span>
            <span>Conceptual Blend</span>
            <span>Unconventional</span>
            <span>Surprising</span>
            <span>Analogical</span>
            <span>Challenging</span>
            <span>First-Principles</span>
            <span>Heresy</span>
            <span>Paradigm Shift</span>
            <span>Exotic</span>
          </div>
        </div>

        <div class="space-y-3" id="step6">
          <div class="flex justify-between items-end border-b border-slate-100 pb-2 mb-2">
            <h2 class="text-xl font-bold text-blue-600">Step 6: Choose the Style</h2>
          </div>
          <label for="styleLevel" class="block text-sm text-slate-600 mb-2">Define the aesthetic and readability of the final output.</label>
          <div class="relative h-10 flex items-center">
            <input type="range" id="styleLevel" min="1" max="10" value="4" oninput="updateSlider(this)" class="w-full">
          </div>
          <div class="flex justify-between text-xs text-slate-400 px-1">
            <span>Raw Text</span>
            <span>Direct</span>
            <span>Formatted</span>
            <span>Chain-of-Thought</span>
            <span>Analytical</span>
            <span>Narrative</span>
            <span>Socratic</span>
            <span>Literary</span>
            <span>Poetic</span>
            <span>Masterpiece</span>
          </div>
        </div>

        <div class="space-y-3" id="step7">
          <div class="flex justify-between items-end border-b border-slate-100 pb-2 mb-2">
            <h2 class="text-xl font-bold text-blue-600">Step 7: Shape the Output</h2>
          </div>
          <label for="outputLevel" class="block text-sm text-slate-600 mb-2">Determine the structure and format of the response.</label>
          <div class="relative h-10 flex items-center">
            <input type="range" id="outputLevel" min="1" max="10" value="4" oninput="updateSlider(this)" class="w-full">
          </div>
          <div class="flex justify-between text-xs text-slate-400 px-1">
            <span>Raw Text</span>
            <span>Bullets</span>
            <span>Markdown</span>
            <span>Table</span>
            <span>Presentation</span>
            <span>Mind Map</span>
            <span>Plan</span>
            <span>Formal Paper</span>
            <span>Polished Artifact</span>
            <span>Dialogue</span>
          </div>
        </div>

        <div class="space-y-3" id="step8">
          <div class="flex justify-between items-end border-b border-slate-100 pb-2 mb-2">
            <h2 class="text-xl font-bold text-blue-600">Step 8: Add a Constraint (Optional)</h2>
          </div>
          <label for="constraintLevel" class="block text-sm text-slate-600 mb-2">Apply a specific rule or limitation to the output.</label>
          <div class="relative h-10 flex items-center">
            <input type="range" id="constraintLevel" min="1" max="10" value="1" oninput="updateSlider(this)" class="w-full">
          </div>
          <div class="flex justify-between text-xs text-slate-400 px-1">
            <span>None</span>
            <span>Concise</span>
            <span>Word Limit</span>
            <span>Formal Tone</span>
            <span>No Jargon</span>
            <span>In-Character</span>
            <span>Step-by-Step</span>
            <span>Bullets Only</span>
            <span>Single Para</span>
            <span>Strict</span>
          </div>
        </div>

        <div class="space-y-3" id="step9">
          <div class="flex justify-between items-end border-b border-slate-100 pb-2 mb-2">
            <h2 class="text-xl font-bold text-blue-600">Step 9: Set the Polish Level (Optional)</h2>
          </div>
          <label for="polishLevel" class="block text-sm text-slate-600 mb-2">Define the final refinement pass on the entire output.</label>
          <div class="relative h-10 flex items-center">
            <input type="range" id="polishLevel" min="1" max="10" value="1" oninput="updateSlider(this)" class="w-full">
          </div>
          <div class="flex justify-between text-xs text-slate-400 px-1">
            <span>None</span>
            <span>Proofread</span>
            <span>Improve Flow</span>
            <span>Check Accuracy</span>
            <span>Add Summary</span>
            <span>Review Directives</span>
            <span>Simplify</span>
            <span>Elevate Tone</span>
            <span>Add Insight</span>
            <span>Make Inevitable</span>
          </div>
        </div>

      </div>

      <div class="mt-12 pt-8 border-t border-slate-200">
        <label for="melOutput" class="block font-bold text-slate-700 mb-3">Generated MEL prompt (auto-updates):</label>
        <textarea id="melOutput" readonly rows="12" class="w-full p-4 border border-slate-200 rounded-xl font-mono text-sm bg-slate-50 text-slate-800 focus:outline-none focus:border-blue-500 transition-all"></textarea>

        <div class="flex flex-wrap gap-3 mt-4">
          <button class="px-5 py-3 rounded-xl font-semibold text-white transition-all shadow-sm hover:shadow-md active:scale-95 bg-slate-500 hover:bg-slate-600 copy-btn" onclick="copyToClipboard()">Copy Prompt</button>
          <button class="px-5 py-3 rounded-xl font-semibold text-white transition-all shadow-sm hover:shadow-md active:scale-95 bg-emerald-500 hover:bg-emerald-600" onclick="sendToLLM('chatgpt')">Run in ChatGPT</button>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-12">
          <div class="flex flex-col gap-2">
            <div class="flex justify-between items-center">
              <label for="openclawMessageOutput" class="font-semibold text-slate-700">OpenClaw: Message Prompt</label>
              <button class="px-3 py-1 text-xs font-semibold rounded-lg bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors copy-btn" onclick="copyExportCode('openclawMessage', 'general')">Copy Code</button>
            </div>
            <textarea id="openclawMessageOutput" readonly rows="8" class="w-full p-3 border border-slate-200 rounded-lg font-mono text-xs bg-slate-50"></textarea>
          </div>
          <div class="flex flex-col gap-2">
            <div class="flex justify-between items-center">
              <label for="openclawSkillOutput" class="font-semibold text-slate-700">OpenClaw: New Skill File</label>
              <button class="px-3 py-1 text-xs font-semibold rounded-lg bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors copy-btn" onclick="copyExportCode('openclawSkill', 'general')">Copy Code</button>
            </div>
            <textarea id="openclawSkillOutput" readonly rows="10" class="w-full p-3 border border-slate-200 rounded-lg font-mono text-xs bg-slate-50"></textarea>
          </div>
          <div class="col-span-1 md:col-span-2 text-sm text-slate-500 -mt-4 mb-2">
            <strong>To use with OpenClaw:</strong> Paste the <strong>Message Prompt</strong> for a one-off task, or save
            the <strong>New Skill File</strong> as a <code>.md</code> file to create a reusable skill.
          </div>
          <div class="flex flex-col gap-2">
            <div class="flex justify-between items-center">
              <label for="dspyOutput" class="font-semibold text-slate-700">Export for DSPy</label>
              <button class="px-3 py-1 text-xs font-semibold rounded-lg bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors copy-btn" onclick="copyExportCode('dspy', 'general')">Copy Code</button>
            </div>
            <textarea id="dspyOutput" readonly rows="10" class="w-full p-3 border border-slate-200 rounded-lg font-mono text-xs bg-slate-50"></textarea>
          </div>
          <div class="flex flex-col gap-2">
            <div class="flex justify-between items-center">
              <label for="langchainOutput" class="font-semibold text-slate-700">Export for LangChain</label>
              <button class="px-3 py-1 text-xs font-semibold rounded-lg bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors copy-btn" onclick="copyExportCode('langchain', 'general')">Copy Code</button>
            </div>
            <textarea id="langchainOutput" readonly rows="10" class="w-full p-3 border border-slate-200 rounded-lg font-mono text-xs bg-slate-50"></textarea>
          </div>
          <div class="flex flex-col gap-2">
            <div class="flex justify-between items-center">
              <label for="geminiSkillOutput" class="font-semibold text-slate-700">Export Gemini Skill (GEMINI.md)</label>
              <button class="px-3 py-1 text-xs font-semibold rounded-lg bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors copy-btn" onclick="copyExportCode('gemini', 'general')">Copy Code</button>
            </div>
            <textarea id="geminiSkillOutput" readonly rows="10" class="w-full p-3 border border-slate-200 rounded-lg font-mono text-xs bg-slate-50"></textarea>
          </div>
        </div>
      </div>

    </div>

    <!-- Software Development Tab -->
    <div id="software" class="tab-content hidden space-y-10">
      <div class="grid gap-8">

        <div class="space-y-6">
          <div class="flex flex-col gap-2">
            <label for="humanQuery-software" class="font-semibold text-slate-700 text-lg">Your software development query:</label>
            <textarea id="humanQuery-software" class="w-full min-h-[120px] p-4 border border-slate-200 rounded-xl font-mono text-sm bg-slate-50 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all resize-y placeholder-slate-400"
              placeholder="Example: Implement a generic debounce function in TypeScript."></textarea>
          </div>

          <div class="flex flex-col gap-2">
            <label for="examples-software" class="font-semibold text-slate-700">Provide Examples (Optional):</label>
            <textarea id="examples-software" class="w-full min-h-[100px] p-4 border border-slate-200 rounded-xl font-mono text-sm bg-slate-50 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all resize-y placeholder-slate-400"
              placeholder="Provide one or more input/output examples to guide the model. e.g.,&#10;Input: 'hello world'&#10;Output: 'dlrow olleh'"></textarea>
          </div>

          <div class="flex flex-col gap-2">
            <label for="exclusions-software" class="font-semibold text-slate-700">Exclusions (Optional):</label>
            <textarea id="exclusions-software" rows="2" class="w-full min-h-[80px] p-4 border border-slate-200 rounded-xl font-mono text-sm bg-slate-50 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all resize-y placeholder-slate-400"
              placeholder="Specify what to avoid. e.g.,&#10;- Do not use any external libraries.&#10;- Avoid class-based components."></textarea>
          </div>
        </div>

        <div class="space-y-3" id="step1-software">
          <div class="flex justify-between items-end border-b border-slate-100 pb-2 mb-2">
            <h2 class="text-xl font-bold text-blue-600">Step 1: Define the Persona</h2>
          </div>
          <label for="roleLevel-software" class="block text-sm text-slate-600 mb-2">Adjust the expertise and character of the assistant.</label>
          <div class="relative h-10 flex items-center">
            <input type="range" id="roleLevel-software" min="1" max="10" value="4" oninput="updateSlider(this)" class="w-full">
          </div>
          <div class="flex justify-between text-xs text-slate-400 px-1">
            <span>Junior Dev</span>
            <span>Senior Eng</span>
            <span>Tech Lead</span>
            <span>Architect</span>
            <span>Staff Eng</span>
            <span>Code Reviewer</span>
            <span>Pair Programmer</span>
            <span>Security Expert</span>
            <span>DevOps Eng</span>
            <span>QA Tester</span>
          </div>
        </div>

        <div class="space-y-3" id="step2-software">
          <div class="flex justify-between items-end border-b border-slate-100 pb-2 mb-2">
            <h2 class="text-xl font-bold text-blue-600">Step 2: Define the Task</h2>
          </div>
          <label for="taskLevel-software" class="block text-sm text-slate-600 mb-2">Specify the primary action for the assistant to perform.</label>
          <div class="relative h-10 flex items-center">
            <input type="range" id="taskLevel-software" min="1" max="10" value="2" oninput="updateSlider(this)" class="w-full">
          </div>
          <div class="flex justify-between text-xs text-slate-400 px-1">
            <span>Implement</span>
            <span>Refactor</span>
            <span>Write Tests</span>
            <span>Debug</span>
            <span>Design</span>
            <span>Document</span>
            <span>Optimize</span>
            <span>Scaffold</span>
            <span>Translate</span>
            <span>Explain Code</span>
          </div>
        </div>

        <div class="space-y-3" id="step3-software">
          <div class="flex justify-between items-end border-b border-slate-100 pb-2 mb-2">
            <h2 class="text-xl font-bold text-blue-600">Step 3: Define the Audience</h2>
          </div>
          <label for="audienceLevel-software" class="block text-sm text-slate-600 mb-2">Calibrate the tone and complexity for a specific audience.</label>
          <div class="relative h-10 flex items-center">
            <input type="range" id="audienceLevel-software" min="1" max="10" value="1" oninput="updateSlider(this)" class="w-full">
          </div>
          <div class="flex justify-between text-xs text-slate-400 px-1">
            <span>Junior Dev</span>
            <span>Product Manager</span>
            <span>Code Review</span>
            <span>API Consumers</span>
            <span>Future Self</span>
            <span>Security Audit</span>
            <span>Perf. Report</span>
            <span>End Users</span>
            <span>Blog Post</span>
            <span>Presentation</span>
          </div>
        </div>

        <div class="space-y-3" id="step4-software">
          <div class="flex justify-between items-end border-b border-slate-100 pb-2 mb-2">
            <h2 class="text-xl font-bold text-blue-600">Step 4: State the Purpose</h2>
          </div>
          <label for="purposeLevel-software" class="block text-sm text-slate-600 mb-2">Explain the "why" behind your request for a more meaningful outcome.</label>
          <div class="relative h-10 flex items-center">
            <input type="range" id="purposeLevel-software" min="1" max="10" value="3" oninput="updateSlider(this)" class="w-full">
          </div>
          <div class="flex justify-between text-xs text-slate-400 px-1">
            <span>Prototype</span>
            <span>Production</span>
            <span>Learning</span>
            <span>Tech Debt</span>
            <span>Scalability</span>
            <span>Security</span>
            <span>Test Coverage</span>
            <span>Docs</span>
            <span>Bug Fix</span>
            <span>Onboarding</span>
          </div>
        </div>

        <div class="space-y-3" id="step5-software">
          <div class="flex justify-between items-end border-b border-slate-100 pb-2 mb-2">
            <h2 class="text-xl font-bold text-blue-600">Step 5: Set the Innovation Level</h2>
          </div>
          <label for="innovationLevel-software" class="block text-sm text-slate-600 mb-2">Choose how much creativity and novelty to introduce.</label>
          <div class="relative h-10 flex items-center">
            <input type="range" id="innovationLevel-software" min="1" max="10" value="4" oninput="updateSlider(this)" class="w-full">
          </div>
          <div class="flex justify-between text-xs text-slate-400 px-1">
            <span>Standard</span>
            <span>New Library</span>
            <span>Clever Algo</span>
            <span>New Paradigm</span>
            <span>Challenge Req</span>
            <span>New Pattern</span>
            <span>Simplify</span>
            <span>Automate</span>
            <span>Radical Design</span>
            <span>Invent</span>
          </div>
        </div>

        <div class="space-y-3" id="step6-software">
          <div class="flex justify-between items-end border-b border-slate-100 pb-2 mb-2">
            <h2 class="text-xl font-bold text-blue-600">Step 6: Choose the Style</h2>
          </div>
          <label for="styleLevel-software" class="block text-sm text-slate-600 mb-2">Define the aesthetic and readability of the final output.</label>
          <div class="relative h-10 flex items-center">
            <input type="range" id="styleLevel-software" min="1" max="10" value="4" oninput="updateSlider(this)" class="w-full">
          </div>
          <div class="flex justify-between text-xs text-slate-400 px-1">
            <span>Raw Code</span>
            <span>Comments</span>
            <span>Full Docs</span>
            <span>CoT Reasoning</span>
            <span>Diagram</span>
            <span>BDD Tests</span>
            <span>Pseudocode</span>
            <span>Commit Msg</span>
            <span>Post-mortem</span>
            <span>Clean Code</span>
          </div>
        </div>

        <div class="space-y-3" id="step7-software">
          <div class="flex justify-between items-end border-b border-slate-100 pb-2 mb-2">
            <h2 class="text-xl font-bold text-blue-600">Step 7: Shape the Output</h2>
          </div>
          <label for="outputLevel-software" class="block text-sm text-slate-600 mb-2">Determine the structure and format of the response.</label>
          <div class="relative h-10 flex items-center">
            <input type="range" id="outputLevel-software" min="1" max="10" value="4" oninput="updateSlider(this)" class="w-full">
          </div>
          <div class="flex justify-between text-xs text-slate-400 px-1">
            <span>Single File</span>
            <span>Module</span>
            <span>Config</span>
            <span>Script</span>
            <span>Dockerfile</span>
            <span>Diagram</span>
            <span>Test Suite</span>
            <span>API Docs</span>
            <span>Dir. Tree</span>
            <span>Snippet</span>
          </div>
        </div>

        <div class="space-y-3" id="step8-software">
          <div class="flex justify-between items-end border-b border-slate-100 pb-2 mb-2">
            <h2 class="text-xl font-bold text-blue-600">Step 8: Add a Constraint (Optional)</h2>
          </div>
          <label for="constraintLevel-software" class="block text-sm text-slate-600 mb-2">Apply a specific rule or limitation to the output.</label>
          <div class="relative h-10 flex items-center">
            <input type="range" id="constraintLevel-software" min="1" max="10" value="1" oninput="updateSlider(this)" class="w-full">
          </div>
          <div class="flex justify-between text-xs text-slate-400 px-1">
            <span>None</span>
            <span>No Libs</span>
            <span>Line Limit</span>
            <span>Idiomatic</span>
            <span>100% Coverage</span>
            <span>Version-lock</span>
            <span>No API Change</span>
            <span>SOLID</span>
            <span>Pure Functions</span>
            <span>Performant</span>
          </div>
        </div>

        <div class="space-y-3" id="step9-software">
          <div class="flex justify-between items-end border-b border-slate-100 pb-2 mb-2">
            <h2 class="text-xl font-bold text-blue-600">Step 9: Set the Polish Level (Optional)</h2>
          </div>
          <label for="polishLevel-software" class="block text-sm text-slate-600 mb-2">Define the final refinement pass on the entire output.</label>
          <div class="relative h-10 flex items-center">
            <input type="range" id="polishLevel-software" min="1" max="10" value="1" oninput="updateSlider(this)" class="w-full">
          </div>
          <div class="flex justify-between text-xs text-slate-400 px-1">
            <span>None</span>
            <span>Proofread</span>
            <span>Format</span>
            <span>Edge Cases</span>
            <span>Error Handling</span>
            <span>Review Directives</span>
            <span>Simplify</span>
            <span>Add Types</span>
            <span>Add README</span>
            <span>Prod-Ready</span>
          </div>
        </div>

      </div>

      <div class="mt-12 pt-8 border-t border-slate-200">
        <label for="melOutput-software" class="block font-bold text-slate-700 mb-3">Generated MEL prompt (auto-updates):</label>
        <textarea id="melOutput-software" readonly rows="12" class="w-full p-4 border border-slate-200 rounded-xl font-mono text-sm bg-slate-50 text-slate-800 focus:outline-none focus:border-blue-500 transition-all"></textarea>

        <div class="flex flex-wrap gap-3 mt-4">
          <button class="px-5 py-3 rounded-xl font-semibold text-white transition-all shadow-sm hover:shadow-md active:scale-95 bg-slate-500 hover:bg-slate-600 copy-btn" onclick="copyToClipboard('software')">Copy Prompt</button>
          <button class="px-5 py-3 rounded-xl font-semibold text-white transition-all shadow-sm hover:shadow-md active:scale-95 bg-emerald-500 hover:bg-emerald-600" onclick="sendToLLM('chatgpt', 'software')">Run in ChatGPT</button>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-12">
          <div class="flex flex-col gap-2">
            <div class="flex justify-between items-center">
              <label for="openclawMessageOutput-software" class="font-semibold text-slate-700">OpenClaw: Message Prompt</label>
              <button class="px-3 py-1 text-xs font-semibold rounded-lg bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors copy-btn" onclick="copyExportCode('openclawMessage', 'software')">Copy Code</button>
            </div>
            <textarea id="openclawMessageOutput-software" readonly rows="8" class="w-full p-3 border border-slate-200 rounded-lg font-mono text-xs bg-slate-50"></textarea>
          </div>
          <div class="flex flex-col gap-2">
            <div class="flex justify-between items-center">
              <label for="openclawSkillOutput-software" class="font-semibold text-slate-700">OpenClaw: New Skill File</label>
              <button class="px-3 py-1 text-xs font-semibold rounded-lg bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors copy-btn" onclick="copyExportCode('openclawSkill', 'software')">Copy Code</button>
            </div>
            <textarea id="openclawSkillOutput-software" readonly rows="10" class="w-full p-3 border border-slate-200 rounded-lg font-mono text-xs bg-slate-50"></textarea>
          </div>
          <div class="col-span-1 md:col-span-2 text-sm text-slate-500 -mt-4 mb-2">
            <strong>To use with OpenClaw:</strong> Paste the <strong>Message Prompt</strong> for a one-off task, or save
            the <strong>New Skill File</strong> as a <code>.md</code> file to create a reusable skill.
          </div>
          <div class="flex flex-col gap-2">
            <div class="flex justify-between items-center">
              <label for="dspyOutput-software" class="font-semibold text-slate-700">Export for DSPy</label>
              <button class="px-3 py-1 text-xs font-semibold rounded-lg bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors copy-btn" onclick="copyExportCode('dspy', 'software')">Copy Code</button>
            </div>
            <textarea id="dspyOutput-software" readonly rows="10" class="w-full p-3 border border-slate-200 rounded-lg font-mono text-xs bg-slate-50"></textarea>
          </div>
          <div class="flex flex-col gap-2">
            <div class="flex justify-between items-center">
              <label for="langchainOutput-software" class="font-semibold text-slate-700">Export for LangChain</label>
              <button class="px-3 py-1 text-xs font-semibold rounded-lg bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors copy-btn" onclick="copyExportCode('langchain', 'software')">Copy Code</button>
            </div>
            <textarea id="langchainOutput-software" readonly rows="10" class="w-full p-3 border border-slate-200 rounded-lg font-mono text-xs bg-slate-50"></textarea>
          </div>
          <div class="flex flex-col gap-2">
            <div class="flex justify-between items-center">
              <label for="geminiSkillOutput-software" class="font-semibold text-slate-700">Export Gemini Skill (GEMINI.md)</label>
              <button class="px-3 py-1 text-xs font-semibold rounded-lg bg-slate-100 text-slate-600 hover:bg-slate-200 transition-colors copy-btn" onclick="copyExportCode('gemini', 'software')">Copy Code</button>
            </div>
            <textarea id="geminiSkillOutput-software" readonly rows="10" class="w-full p-3 border border-slate-200 rounded-lg font-mono text-xs bg-slate-50"></textarea>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Footer -->
    <div class="bg-slate-50 border-t border-slate-200 p-8 text-center text-slate-500 text-sm">
      <p>MEL v1.0 • <a href="https://github.com/polonski/mel" target="_blank" class="text-blue-600 hover:underline">github.com/polonski/mel</a></p>
      <p class="mt-1">Experimental prompting syntax — January 2026</p>
    </div>

  </div>

  <script>
    let currentTab = 'general';
    let melStore = {
      general: {},
      software: {}
    };

    const allSliders = {
      general: {
        role: { base: ['an eager Student', 'a helpful Assistant', 'a creative Collaborator', 'a domain Expert', 'a world-class Specialist', 'a wise Mentor', 'a forward-thinking Visionary', "a Devil's Advocate", 'an Oracle of wisdom', 'a System Simulator'] },
        task: { base: ['Execute the following instructions for', 'Achieve the primary objective of', 'Synthesize multiple concepts for', 'Execute a precision-critical directive for', 'Brainstorm a wide list of ideas for', 'Explain the core concepts of', 'Critique and find flaws in', 'Design a high-level plan for', 'Deconstruct the core principles of', 'Act as a Socratic tutor for'] },
        audience: { base: ['', 'for a 5-year-old child', 'for a complete novice with no domain knowledge', 'for a peer or colleague with similar expertise', 'for a non-technical manager or executive', 'for a skeptical audience that needs convincing', 'for a panel of domain experts', 'for a regulatory or compliance review', 'for future generations (as in an archive)', 'for my own private reflection and understanding'] },
        purpose: { base: ['', 'for a practical, immediate solution', 'for educational purposes, to learn or teach', 'to create a durable and valuable resource', 'to inform a high-level strategic decision', 'for a commercial application or business value', 'to generate a profoundly positive human impact', 'for artistic, poetic, or philosophical value', 'to be provocative and challenge established thinking', 'to be transformative and alter a core perspective'] },
        constraint: { base: ['', 'Constraint: Be as concise and direct as possible.', 'Constraint: The response must not exceed 400 words.', 'Constraint: Maintain a strictly formal and professional tone.', 'Constraint: Avoid all technical jargon and explain in simple terms.', 'Constraint: Do not break character from the specified Persona.', 'Constraint: Present the answer as a clear, step-by-step process.', 'Constraint: The output must be in bullet points only.', 'Constraint: The output must be a single paragraph.', 'Constraint: The most important rule is to follow all other directives with absolute strictness.'] },
        innovation: { base: ['', 'by blending proven concepts from different fields', 'from an unconventional angle', 'by introducing a surprising and clever element', 'by drawing inspiration from a different domain', 'by challenging the fundamental assumptions', 'by using first-principles thinking', 'by infusing a bold, heretical viewpoint', 'by generating a paradigm-shifting insight', 'by combining multiple exotic ideas'] },
        style: { base: ['as raw, unadorned data', 'in a direct, simple, and unformatted style', 'with professional formatting (headings, lists)', 'with Chain-of-Thought reasoning shown inside <thinking> tags before the final answer', 'as an Analytical report', 'with an elegant, persuasive, and narrative flow', 'in a Socratic style of questions and answers', 'with high-quality, evocative literary prose', 'with rich metaphor and poetic language', 'as a masterpiece of clarity, depth, and beauty'] },
        output: { base: ['as unformatted raw text', 'as a simple, scannable list of bullet points', 'as a well-structured markdown document', 'as a structured Table', 'as content for a presentation (slides/notes)', 'as a Mind Map', 'as a detailed Plan', 'as a formal paper with academic structure', 'as a polished, publish-ready artifact', 'as a Dialogue or Script'] },
        polish: { base: ['', 'Polish: by proofreading for grammar and typos.', 'Polish: by improving the clarity and flow of the text.', 'Polish: by double-checking that the answer directly and accurately addresses the query.', 'Polish: by adding a concise summary at the end.', 'Polish: by reviewing the full response to ensure it consistently adheres to all directives.', 'Polish: by simplifying complex sentences and removing unnecessary jargon.', 'Polish: by elevating the vocabulary and overall tone to be more sophisticated.', 'Polish: by concluding with a surprising or insightful final thought.', 'Polish: until the entire response feels inevitable and delightful.'] },
      },
      software: {
        role: { base: ['a Junior Developer', 'a Senior Engineer', 'a Tech Lead', 'a Principal Architect', 'a Staff Engineer', 'a Code Reviewer', 'a Pair Programmer', 'a Security Expert', 'a DevOps Engineer', 'a QA Tester'] },
        task: { base: ['Implement a feature for', 'Refactor the following code', 'Write unit tests for', 'Debug and fix an issue in', 'Design a system for', 'Document the API of', 'Optimize the performance of', 'Scaffold a project for', 'Translate code for', 'Explain the following code'] },
        audience: { base: ['for a Junior Dev', 'for a Product Manager', 'for a Code Review', 'for API Consumers', 'for my Future Self', 'for a Security Audit', 'for a Performance Report', 'for End Users (docs)', 'for a Technical Blog Post', 'for a presentation to stakeholders'] },
        purpose: { base: ['for a quick prototype', 'for production-ready code', 'for a learning exercise', 'to reduce technical debt', 'to improve system scalability', 'to enhance application security', 'to increase test coverage', 'to create clear documentation', 'to fix a critical bug', 'for developer onboarding'] },
        innovation: { base: ['using standard industry patterns', 'by applying a new library/framework', 'with a clever or non-obvious algorithm', 'by refactoring to a different paradigm (e.g., FP)', 'by challenging the initial requirements', 'by introducing a novel design pattern', 'by radically simplifying the complexity', 'by automating a manual developer process', 'by proposing a radical new architecture', 'by inventing a new domain-specific approach'] },
        style: { base: ['as raw, runnable code', 'with detailed inline comments', 'with full JSDoc/Docstring documentation', 'with Chain-of-Thought reasoning shown inside <thinking> tags before the final answer', 'as a sequence or flow diagram (Mermaid)', 'with BDD-style tests (Gherkin)', 'as a clear pseudocode plan', 'as a structured git commit message', 'as a post-mortem or incident analysis', 'as a masterpiece of clean, self-documenting code'] },
        output: { base: ['a single code file', 'a complete class or module', 'a valid JSON/YAML configuration file', 'a reusable shell script', 'a complete Dockerfile or CI/CD pipeline', 'a textual diagram (Mermaid.js)', 'a complete and runnable test suite', 'an OpenAPI/Swagger documentation file', 'a directory structure tree', 'a standalone, runnable code snippet'] },
        constraint: { base: ['', 'Constraint: Use no external libraries or dependencies.', 'Constraint: The solution must be under 100 lines of code.', 'Constraint: Must be idiomatic to the specified framework/language.', 'Constraint: Must achieve 100% test coverage.', 'Constraint: Use only the specified library versions.', 'Constraint: Must not alter the existing public API.', 'Constraint: Must follow SOLID principles strictly.', 'Constraint: Must be composed of pure functions where possible.', 'Constraint: Must be highly performant and memory-efficient.'] },
        polish: { base: ['', 'Polish: by proofreading all comments and documentation.', 'Polish: by formatting/linting the code to style guides.', 'Polish: by checking for and handling all edge cases.', 'Polish: by adding robust error handling and logging.', 'Polish: by ensuring all original directives were strictly followed.', 'Polish: by simplifying the logic and improving readability.', 'Polish: by adding comprehensive type hints (e.g., TypeScript/Python).', 'Polish: by writing a clear README.md for the code.', 'Polish: until the code is production-ready and maintainable.'] },
      }
    };

    function getEl(id, context) {
      const suffix = context === 'general' ? '' : `-${context}`;
      return document.getElementById(id + suffix);
    }

    function getLevel(id) {
      return parseInt(getEl(id, currentTab).value) - 1;
    }

    function updateSlider(el) {
      const percent = ((el.value - el.min) / (el.max - el.min)) * 100;
      el.style.setProperty('--value', percent + '%');
      generateMEL(currentTab);
    }

    function generateMEL(context) {
      const query = getEl('humanQuery', context).value.trim();
      const examples = getEl('examples', context).value.trim();
      const exclusions = getEl('exclusions', context).value.trim();
      const outputEl = getEl('melOutput', context);

      if (!query) {
        outputEl.value = "Enter your query to begin the prompt generation journey…";
        updateExportPreviews(context);
        return;
      }

      const sliders = allSliders[context];
      melStore[context] = {
        persona: sliders.role.base[getLevel('roleLevel')],
        task: sliders.task.base[getLevel('taskLevel')],
        query: query,
        examples: examples,
        exclusions: exclusions,
        audience: sliders.audience.base[getLevel('audienceLevel')],
        purpose: sliders.purpose.base[getLevel('purposeLevel')],
        constraint: sliders.constraint.base[getLevel('constraintLevel')],
        innovation: sliders.innovation.base[getLevel('innovationLevel')],
        style: sliders.style.base[getLevel('styleLevel')],
        output: sliders.output.base[getLevel('outputLevel')],
        polish: sliders.polish.base[getLevel('polishLevel')],
      };

      const melParts = [];
      const c = melStore[context];

      melParts.push(`Persona: ${c.persona}`);
      melParts.push(`Task: ${c.task}`);
      melParts.push(`Query:\n  """\n  ${c.query}\n  """`);

      if (c.examples) {
        melParts.push(`Examples:\n  <examples>\n  ${c.examples}\n  </examples>`);
      }

      if (c.exclusions) {
        melParts.push(`Exclusions:\n  """\n  ${c.exclusions}\n  """`);
      }

      if (c.constraint) melParts.push(c.constraint);
      if (c.audience) melParts.push(`Audience: ${c.audience}`);
      if (c.purpose) melParts.push(`Purpose: ${c.purpose}`);
      if (c.innovation) melParts.push(`Innovate: ${c.innovation}`);

      melParts.push(`Style: ${c.style}`);
      melParts.push(`Output: ${c.output}`);
      if (c.polish) melParts.push(c.polish);

      outputEl.value = melParts.join('\n\n');
      updateExportPreviews(context);
    }

    function copyToClipboard(context = 'general') {
      const el = getEl('melOutput', context);
      if (!el.value) return;
      navigator.clipboard.writeText(el.value).then(() => {
        const btn = document.querySelector(`#${context} .copy-btn`);
        const original = btn.textContent;
        btn.textContent = 'Copied!';
        setTimeout(() => btn.textContent = original, 1800);
      });
    }

    function sendToLLM(llm, context = 'general') {
      const prompt = getEl('melOutput', context).value.trim();
      if (!prompt) {
        alert("Generate a MEL prompt first!");
        return;
      }

      let url = '';
      let note = '';

      switch (llm) {
        case 'chatgpt': url = `https://chatgpt.com/?q=${encodeURIComponent(prompt)}`; break;
        case 'claude': url = `https://claude.ai/new?q=${encodeURIComponent(prompt)}`; break;
        case 'gemini': url = `https://gemini.google.com/app?prompt=${encodeURIComponent(prompt)}`; break;
        case 'perplexity': url = `https://www.perplexity.ai/?q=${encodeURIComponent(prompt)}`; break;
        case 'poe': url = `https://poe.com/?q=${encodeURIComponent(prompt)}`; break;
        case 'you': url = `https://you.com/?q=${encodeURIComponent(prompt)}`; break;
        case 'mistral': url = `https://chat.mistral.ai/chat?prompt=${encodeURIComponent(prompt)}`; break;
        case 'grok':
          url = `https://grok.x.ai/`;
          note = "Grok does not support direct URL pre-filling (as of early 2026).\n\nMain chat will open — please paste the prompt manually.";
          break;
        default: return;
      }

      if (note) alert(note);
      window.open(url, '_blank');
    }

    function copyExportCode(format, context) {
      let elId;
      if (format === 'dspy') {
        elId = 'dspyOutput';
      } else if (format === 'langchain') {
        elId = 'langchainOutput';
      } else if (format === 'gemini') {
        elId = 'geminiSkillOutput';
      } else if (format === 'openclawMessage') {
        elId = 'openclawMessageOutput';
      } else if (format === 'openclawSkill') {
        elId = 'openclawSkillOutput';
      } else {
        return;
      }
      const el = getEl(elId, context);
      if (!el.value) return;
      navigator.clipboard.writeText(el.value).then(() => {
        const btn = document.querySelector(`#${context} button[onclick="copyExportCode('${format}', '${context}')"]`);
        const original = btn.textContent;
        btn.textContent = 'Copied!';
        setTimeout(() => btn.textContent = original, 1800);
      });
    }

    function updateExportPreviews(context) {
      const c = melStore[context];
      if (!c.query) {
        getEl('dspyOutput', context).value = '';
        getEl('langchainOutput', context).value = '';
        getEl('geminiSkillOutput', context).value = '';
        getEl('openclawMessageOutput', context).value = '';
        getEl('openclawSkillOutput', context).value = '';
        return;
      }

      const system_prompt_parts = [
        `Persona: ${c.persona}`,
        `Task: ${c.task}`,
        c.examples ? `Examples:\n  <examples>\n  ${c.examples}\n  </examples>` : null,
        c.exclusions ? `Exclusions:\n  """\n  ${c.exclusions}\n  """` : null,
        c.constraint,
        c.audience ? `Audience: ${c.audience}` : null,
        c.purpose ? `Purpose: ${c.purpose}` : null,
        c.innovation ? `Innovate: ${c.innovation}` : null,
        `Style: ${c.style}`,
        `Output: ${c.output}`,
        c.polish
      ].filter(Boolean);

      const system_prompt = system_prompt_parts.join('\n\n');

      const dspyCode = `import dspy

class MelSignature(dspy.Signature):
    """${c.task}"""
    
    human_query = dspy.InputField(desc="The user's request.")
    llm_answer = dspy.OutputField(desc="The generated response based on the MEL directives.")
# --- Full MEL System Prompt ---
# """
# ${system_prompt}
# """
`;
      getEl('dspyOutput', context).value = dspyCode;

      const langchainCode = `from langchain_core.prompts import ChatPromptTemplate

system_prompt = """${system_prompt}"""

prompt_template = ChatPromptTemplate.from_messages([
    ("system", system_prompt),
    ("human", "{human_query}"),
])`;
      getEl('langchainOutput', context).value = langchainCode;

      const currentMelPrompt = getEl('melOutput', context).value;

      const geminiSkillContent = `# Gemini Skill: Mastering Machine Expression Language (MEL)

This document is your guide to mastering the art of interpreting and responding to Machine Expression Language (MEL) prompts. By internalizing this skill, you will be able to deconstruct user intent with high precision and generate responses that are more accurate, creative, and aligned with the user's goals.

## Core Concept: Directives as Function Parameters

Think of a MEL prompt not as a simple request, but as a **function call** where you are the function being executed. Each directive (\`Persona\`, \`Task\`, \`Style\`, etc.) is a **parameter** that constrains and shapes your output. Your goal is to generate a response that perfectly satisfies all provided parameters.

## Directive Breakdown & Syntax Nuances

MEL uses a clean \`Key: Value\` syntax and Markdown for structure. This is highly effective because it provides unambiguous, machine-readable instructions.

### The Current Prompt's Directives:

Here is the MEL prompt generated from your current selections. You should interpret its directives as follows:

\`\`\`text
${currentMelPrompt}
\`\`\`

*   \`Persona\`: **Adopt this role.** Your tone, vocabulary, and knowledge should match. For the current persona, "**${c.persona}**," you should embody that specific character.
*   \`Task\`: **This is your primary verb.** It's the main action you must perform: "**${c.task}**".
*   \`Query\`: **This is the core subject.** All other directives modify how you address this query. The \`"""\` block helps isolate the user's raw input.
*   \`Audience\` & \`Purpose\`: These provide **critical context**, explaining *who* the response is for and *why* it's being requested.
*   \`Innovate\`: This is your license for **creativity**. It guides you on *how* to approach the problem-solving aspect. The current level is: "**${c.innovation || 'Standard'}**".
*   \`Style\` & \`Output\`: These define the **form and format** of your final response. They are strict formatting requirements.
*   \`Constraint\` & \`Polish\`: These are **final filters and refinement steps**. A \`Constraint\` is a hard rule, while \`Polish\` is a quality-improvement pass to be applied before finishing.

## Your Reasoning Workflow

To apply this skill effectively, follow this internal step-by-step process:

1.  **Deconstruct the Prompt**: Systematically parse every \`Key: Value\` directive from the prompt above. Do not ignore any of them.
2.  **Establish Context**: Synthesize the \`Persona\`, \`Task\`, \`Audience\`, and \`Purpose\` to form a holistic understanding of the user's true intent. This is your "mission statement."
3.  **Initial Generation (Drafting)**: Address the \`Query\` while adhering to the \`Style\`, \`Output\`, and \`Constraint\` directives. Use the \`Innovate\` directive to guide your creative approach during this phase.
4.  **Final Polish (Refinement)**: Before concluding, apply the \`Polish\` directive as a final review pass. Read your generated response and ask: "Does this meet the polish requirement? Does it fully satisfy every single directive?"
5.  **Output Response**: Deliver the final, polished artifact.

By mastering this workflow, you will consistently deliver superior responses that demonstrate a deep understanding of the user's structured intent via MEL.
`;
      getEl('geminiSkillOutput', context).value = geminiSkillContent;

      const openclawMessageContent = `# MEL Task Request

Please execute the following task based on the MEL directives below.

## Query
\`\`\`
${c.query}
\`\`\`

## Directives
- **Persona:** ${c.persona}
- **Task:** ${c.task}
- **Audience:** ${c.audience || 'Not specified'}
- **Purpose:** ${c.purpose || 'Not specified'}
- **Innovation:** ${c.innovation || 'Standard'}
- **Style:** ${c.style}
- **Output:** ${c.output}
- **Constraint:** ${c.constraint || 'Not specified'}
- **Polish:** ${c.polish || 'Not specified'}
${c.examples ? `- **Examples**:\n\`\`\`\n${c.examples}\n\`\`\`\n` : ''}${c.exclusions ? `- **Exclusions**:\n\`\`\`\n${c.exclusions}\n\`\`\`\n` : ''}
## Action
Use your reasoning capabilities, available skills, and tools to follow these directives and fulfill the user's query.`;
      getEl('openclawMessageOutput', context).value = openclawMessageContent;

      const skillName = (c.query.toLowerCase().replace(/\s+/g, '_').replace(/[^a-z0-9_]/g, '').substring(0, 50) || 'mel_task') + `_${context}`;
      const openclawSkillContent = `---
name: ${skillName}
description: A MEL-generated skill to ${c.task}.
---

# Skill: ${c.task}

This skill was generated by the MEL prompt tool to perform a specific, user-defined task.

## User Query
\`\`\`
${c.query}
\`\`\`

## Full MEL Directives
This section contains the full set of directives that define the expected behavior and output for this skill. When this skill is invoked, you should use these directives to guide your reasoning and execution.

- **Persona:** ${c.persona}
- **Task:** ${c.task}
- **Audience:** ${c.audience || 'Not specified'}
- **Purpose:** ${c.purpose || 'Not specified'}
- **Innovation:** ${c.innovation || 'Standard'}
- **Style:** ${c.style}
- **Output:** ${c.output}
- **Constraint:** ${c.constraint || 'Not specified'}
- **Polish:** ${c.polish || 'Not specified'}
${c.examples ? `- **Examples**:\n\`\`\`\n${c.examples}\n\`\`\`\n` : ''}${c.exclusions ? `- **Exclusions**:\n\`\`\`\n${c.exclusions}\n\`\`\`\n` : ''}
## Execution Logic
When this skill is invoked, your primary goal is to fulfill the **User Query** by adhering to all the **Full MEL Directives**. Formulate a plan, use your tools, and generate the required output.`;
      getEl('openclawSkillOutput', context).value = openclawSkillContent;
    }

    function switchTab(tabName) {
      currentTab = tabName;
      
      // Hide all contents
      document.querySelectorAll('.tab-content').forEach(el => {
        el.classList.add('hidden');
        el.classList.remove('block');
      });
      
      // Reset all buttons
      document.querySelectorAll('.tab-btn').forEach(el => {
        el.classList.remove('text-blue-600', 'border-blue-600');
        el.classList.add('text-slate-500', 'border-transparent', 'hover:text-slate-800');
      });

      document.getElementById(tabName).classList.remove('hidden');
      document.getElementById(tabName).classList.add('block');
      const btn = document.querySelector(`.tab-btn[onclick="switchTab('${tabName}')"]`);
      btn.classList.remove('text-slate-500', 'border-transparent', 'hover:text-slate-800');
      btn.classList.add('text-blue-600', 'border-blue-600');
      generateMEL(tabName);
    }

    // Live updates
    function setupEventListeners(context) {
      getEl('humanQuery', context).addEventListener('input', () => generateMEL(context));
      getEl('examples', context).addEventListener('input', () => generateMEL(context));
      getEl('exclusions', context).addEventListener('input', () => generateMEL(context));
      document.querySelectorAll(`#${context} input[type="range"]`).forEach(sl => {
        updateSlider(sl);
      });
    }

    setupEventListeners('general');
    setupEventListeners('software');
    generateMEL('general'); // initial run
    generateMEL('software');
  </script>

</body>

</html>